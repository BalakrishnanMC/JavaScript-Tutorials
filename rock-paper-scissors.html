<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissor</title>
  </head>

  <body>
    <p>Rock Paper Scissor</p>
    <button onclick="
      playGame(`rock`,pickComputerMove());
    ">Rock</button>

    <button  onclick="
    playGame(`paper`,pickComputerMove());
    ">Paper</button>

    <button  onclick="
    playGame(`scissor`,pickComputerMove());
    ">Scissor</button>

    <button onclick="
      clearScore();
    ">Reset Score</button>

    <script>
      let score = JSON.parse(localStorage.getItem('score'));
      if(score === null) {
        score = {
          wins: 0,
          losses: 0,
          tie: 0
        }
      };

      function pickComputerMove(){
        let num = Math.random();
        if(num <= 1/3){
          return `rock`;
        }
        else if(num <= 2/3){
          return `paper`;
        }
        else{
          return `scissor`;
        }
      }

      function playGame(playerMove,computerMove){
        let result = ``;
        if(playerMove === `rock` && computerMove === `scissor` || playerMove === `paper` && computerMove === `rock` || playerMove === `scissor` && computerMove === `paper`){
          result = `you win`;
          score.wins++;
        }
        else if(playerMove === `rock` && computerMove === `rock` || playerMove === `paper` && computerMove === `paper` || playerMove === `scissor` && computerMove === `scissor`){
          result = `tie`;
          score.tie++;
        }
        else{
          result = `you lose`;
          score.losses++;
        }
        localStorage.setItem('score',JSON.stringify(score));
        console.log(localStorage.getItem('score'));
      }

      function clearScore(){
        localStorage.removeItem('score');
        score = {
          wins: 0,
          losses: 0,
          tie: 0
        }
      }
      
    </script>
  </body>
</html>